@using ArenaNovaProject5.Web.Services
@using ArenaNovaProject5.Web.Components.Auth
@using MudBlazor

@inject AuthSessionService Session
@inherits LayoutComponentBase

@if (!Session.IsAuthenticated)
{
    <RedirectToLogin />
}
else
{
    <div class="page" style="background: linear-gradient(180deg, #e3f2fd 0%, #9ccaf0 100%); min-height: 100vh;">
        <div class="spacerclass">
            <text class="app-name">Jam Lab</text>
            <text class="app-state">parental monitor</text>
            <text class="app-info">learning progress dashboard</text>
        </div>

        <header class="navbar-header">
            <NavMenu />

            <div class="header-right">
                <Childselector />

                <MudButton Variant="Variant.Filled"
                           Color="Color.Primary"
                           Size="Size.Small"
                           Href="/kid/login">
                    Kid Panel
                </MudButton>
            </div>
        </header>

        <main>
            <article class="content px-4">
                @Body
            </article>
        </main>
    </div>

    <div id="blazor-error-ui" data-nosnippet>
        An unhandled error has occurred.
        <a href="." class="reload">Reload</a>
        <span class="dismiss">ðŸ—™</span>
    </div>
}
