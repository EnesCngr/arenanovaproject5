@page "/login"
@layout ArenaNovaProject5.Web.Components.Layout.PublicLayout
@using Microsoft.AspNetCore.Authorization
@attribute [AllowAnonymous]
@rendermode InteractiveServer

<PageTitle>Login</PageTitle>

<div class="d-flex justify-content-center align-items-center">
    <MudCard Style="width: 400px;">
        <MudCardContent>
            <MudText Typo="Typo.h5" Class="mb-4">Login</MudText>
            <EditForm Model="@Model" OnValidSubmit="HandleLogin" FormName="LoginForm">
                <DataAnnotationsValidator />
                <MudTextField @bind-Value="Model.Email" Label="Email" Required="true" FullWidth="true" />
                <MudTextField @bind-Value="Model.Password" Label="Password" InputType="InputType.Password" Required="true" FullWidth="true" />
                <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary" Class="mt-4" FullWidth="true" Disabled="@IsBusy">
                    @(IsBusy ? "Logging in..." : "Login")
                </MudButton>
            </EditForm>
            @if (!string.IsNullOrEmpty(Error))
            {
                <MudAlert Severity="Severity.Error" Class="mt-2">@Error</MudAlert>
            }
        </MudCardContent>
    </MudCard>
</div>
