@page "/dashboard"
@layout ArenaNovaProject5.Web.Components.Layout.AuthorizedLayout
@rendermode InteractiveServer
@using MudBlazor 

<PageTitle>Dashboard</PageTitle>
<style>
    .hover-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .hover-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.7) !important;
    }
</style>

<MudContainer Class="mt-0 px-8" MaxWidth="MaxWidth.Large">
    <MudGrid>
        <MudItem xs="12" sm="6" md="3">
            <MudPaper Elevation="4" Class="pa-16 ma-2 hover-card" Style="background-color: #f8faf8; border-radius: 16px; box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);">
                <MudText Typo="Typo.h5" Class="mb-3" Style="color: rgb(15, 14, 14);">total study time</MudText>
            </MudPaper>
        </MudItem>
        
        <MudItem xs="12" sm="6" md="3">
            <MudPaper Elevation="4" Class="pa-16 ma-2 hover-card" Style="background-color: #f8faf8; border-radius: 16px; border: 3px solid #b5b5b5; box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);">
                <MudText Typo="Typo.h6" Class="mb-3" Style="color: rgb(15, 14, 14);">Lesson completed</MudText>
            </MudPaper>
        </MudItem>

        <MudItem xs="12" sm="6" md="3">
            <MudPaper Elevation="4" Class="pa-16 ma-2 hover-card" Style="background-color:#f8faf8; border-radius: 16px; border: 3px solid #000000; box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);">
                <MudText Typo="Typo.body1" Class="mb-3" Style="color: rgb(15, 14, 14);">quiz average </MudText>
            </MudPaper>
        </MudItem>

        <MudItem xs="12" sm="6" md="3">
            <MudPaper Elevation="4" Class="pa-16 ma-2 hover-card" Style="background-color: #f8faf8; border-radius: 16px; border: 3px solid #000000; box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);">
                <MudText Typo="Typo.body1" Class="mb-3" Style="color: rgb(15, 14, 14);">achievements</MudText>
            </MudPaper>
        </MudItem>
    </MudGrid>

    <MudGrid Class="mt-8">
        <MudItem xs="12" sm="6" md="6">
            <MudPaper Elevation="3" Class="pa-4 hover-card" Style="height: 100%; background-color: #f8faf8; border: 3px solid #000000; border-radius: 16px; box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);">
                <MudText Typo="Typo.h6">User Activity</MudText>
                <MudText Typo="Typo.body2" Class="mt-2">
                    @if (isLoading)
                    {
                        <MudProgressCircular Indeterminate="true" />
                    }
                    else
                    {
                        <span>Last updated: @DateTime.Now.ToString("HH:mm")</span>
                    }
                </MudText>
                <MudChart ChartType="ChartType.Line" 
                          ChartSeries="@chartSeries" 
                          XAxisLabels="@xAxisLabels" 
                          Width="100%" 
                          Height="250px" />
            </MudPaper>
        </MudItem>
        
        <MudItem xs="12" sm="6" md="6">
            <MudPaper Elevation="3" Class="pa-4 hover-card" Style="height: 100%; background-color: #f8faf8; border: 3px solid #000000; border-radius: 16px; box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);">
                <MudText Typo="Typo.h6">Quiz Performance</MudText>
                <MudText Typo="Typo.body2" Class="mt-2">
                    @if (isLoading)
                    {
                        <MudProgressCircular Indeterminate="true" />
                    }
                    else
                    {
                        <span>Last updated: @DateTime.Now.ToString("HH:mm")</span>
                    }
                </MudText>
                <MudChart ChartType="ChartType.Line" 
                          ChartSeries="@quizChartSeries" 
                          XAxisLabels="@xAxisLabels" 
                          Width="100%" 
                          Height="250px" />
            </MudPaper>
        </MudItem>
    </MudGrid>

    <MudDivider Class="my-8" />
    
<MudGrid>
    <MudItem xs="12">
        <MudCard Class="hover-card" Style="background-color: #f8faf8; border: 3px solid #000000; border-radius: 16px; box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);">
            <MudCardContent>
                <MudText Typo="Typo.h6" Class="mb-4">Recent Achievements</MudText>
                <MudGrid Spacing="2">
                    <MudItem xs="12">
                        <MudPaper Elevation="2" Class="pa-4 hover-card" Style="background-color: white; border-radius: 12px;">
                            <div class="d-flex align-center">
                                <MudIcon Icon="@Icons.Material.Filled.Star" Color="Color.Warning" Class="mr-2" />
                                <MudText Typo="Typo.body2">Completed "Math Basics" Lesson</MudText>
                            </div>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="12">
                        <MudPaper Elevation="2" Class="pa-4 hover-card" Style="background-color: white; border-radius: 12px;">
                            <div class="d-flex align-center">
                                <MudIcon Icon="@Icons.Material.Filled.Star" Color="Color.Warning" Class="mr-2" />
                                <MudText Typo="Typo.body2">Scored 95% on "Science Quiz 1"</MudText>
                            </div>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="12">
                        <MudPaper Elevation="2" Class="pa-4 hover-card" Style="background-color: white; border-radius: 12px;">
                            <div class="d-flex align-center">
                                <MudIcon Icon="@Icons.Material.Filled.Star" Color="Color.Warning" Class="mr-2" />
                                <MudText Typo="Typo.body2">Logged 10 Hours of Study Time</MudText>
                            </div>
                        </MudPaper>
                    </MudItem>
                </MudGrid>
            </MudCardContent>
        </MudCard>
    </MudItem>
</MudGrid>
</MudContainer>

@code {
    private bool isLoading = false;
    private List<ChartSeries> chartSeries = new();
    private List<ChartSeries> quizChartSeries = new();
    private string[] xAxisLabels = { "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun" };

    protected override void OnInitialized()
    {
        // User Activity chart data
        chartSeries = new List<ChartSeries>
        {
            new ChartSeries 
            { 
                Name = "Study Time", 
                Data = new double[] { 2, 4, 3, 5, 6, 4, 7 }
            }
        };

        // Quiz Performance chart data
        quizChartSeries = new List<ChartSeries>
        {
            new ChartSeries 
            { 
                Name = "Quiz Scores", 
                Data = new double[] { 65, 75, 80, 70, 85, 90, 88 }
            }
        };
    }
}
