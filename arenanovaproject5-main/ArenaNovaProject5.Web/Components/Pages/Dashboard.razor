@page "/dashboard"
@layout ArenaNovaProject5.Web.Components.Layout.AuthorizedLayout
@using MudBlazor
@rendermode InteractiveServer

<PageTitle>Dashboard</PageTitle>

<MudContainer MaxWidth="MaxWidth.False" Class="dashboard-root">

    <!-- ===== TOP STATS ===== -->
    <MudGrid Spacing="3">
        <MudItem xs="12" sm="6" md="3">
            <MudPaper Class="stat-card">
                <div class="stat-icon blue">
                    <MudIcon Icon="@Icons.Material.Filled.Schedule" />
                </div>
                <div class="stat-content">
                    <div class="stat-label">Total Study Time</div>
                    <div class="stat-value">245 min</div>
                    <div class="stat-sub">This week</div>
                </div>
                <div class="stat-delta positive">+12%</div>
            </MudPaper>
        </MudItem>

        <MudItem xs="12" sm="6" md="3">
            <MudPaper Class="stat-card">
                <div class="stat-icon green">
                    <MudIcon Icon="@Icons.Material.Filled.MenuBook" />
                </div>
                <div class="stat-content">
                    <div class="stat-label">Lessons Completed</div>
                    <div class="stat-value">12</div>
                    <div class="stat-sub">This week</div>
                </div>
                <div class="stat-delta positive">+3</div>
            </MudPaper>
        </MudItem>

        <MudItem xs="12" sm="6" md="3">
            <MudPaper Class="stat-card">
                <div class="stat-icon blue">
                    <MudIcon Icon="@Icons.Material.Filled.TrackChanges" />
                </div>
                <div class="stat-content">
                    <div class="stat-label">Quiz Average</div>
                    <div class="stat-value">87%</div>
                    <div class="stat-sub">Last 10 quizzes</div>
                </div>
                <div class="stat-delta positive">+5%</div>
            </MudPaper>
        </MudItem>

        <MudItem xs="12" sm="6" md="3">
            <MudPaper Class="stat-card">
                <div class="stat-icon green">
                    <MudIcon Icon="@Icons.Material.Filled.EmojiEvents" />
                </div>
                <div class="stat-content">
                    <div class="stat-label">Achievements</div>
                    <div class="stat-value">5</div>
                    <div class="stat-sub">This month</div>
                </div>
                <div class="stat-delta positive">+2</div>
            </MudPaper>
        </MudItem>
    </MudGrid>

    <!-- ===== CHARTS ===== -->
    <MudGrid Spacing="3" Class="mt-6">
        <MudItem xs="12" md="6">
            <MudPaper Class="panel-card">
                <div class="panel-header">
                    <div>
                        <div class="panel-title">Daily Study Time</div>
                        <div class="panel-sub">Last 7 days</div>
                    </div>
                </div>

                <MudChart ChartType="ChartType.Line"
                          ChartSeries="@studySeries"
                          XAxisLabels="@days"
                          Height="260px" />
            </MudPaper>
        </MudItem>

        <MudItem xs="12" md="6">
            <MudPaper Class="panel-card">
                <div class="panel-header">
                    <div>
                        <div class="panel-title">Quiz Performance Trend</div>
                        <div class="panel-sub">Last 7 days</div>
                    </div>
                </div>

                <MudChart ChartType="ChartType.Line"
                          ChartSeries="@quizSeries"
                          XAxisLabels="@days"
                          Height="260px" />
            </MudPaper>
        </MudItem>
    </MudGrid>

    <!-- ===== BOTTOM ===== -->
    <MudGrid Spacing="3" Class="mt-6">
        <MudItem xs="12" md="8">
            <MudPaper Class="panel-card">
                <div class="panel-title mb-4">Recent Achievements</div>

                <div class="achievement">
                    <div class="ach-icon">🏆</div>
                    <div class="ach-text">
                        <strong>Math Master</strong>
                        <span>Completed 10 multiplication lessons in a row</span>
                    </div>
                    <div class="ach-time">Today</div>
                </div>

                <div class="achievement">
                    <div class="ach-icon">🏆</div>
                    <div class="ach-text">
                        <strong>Speed Champion</strong>
                        <span>Answered 20 questions in under 5 minutes</span>
                    </div>
                    <div class="ach-time">Yesterday</div>
                </div>

                <div class="achievement">
                    <div class="ach-icon">🏆</div>
                    <div class="ach-text">
                        <strong>Perfect Score</strong>
                        <span>Scored 100% on Division Quiz</span>
                    </div>
                    <div class="ach-time">2 days ago</div>
                </div>
            </MudPaper>
        </MudItem>

        <MudItem xs="12" md="4">
            <MudPaper Class="panel-card summary-card">
                <div class="panel-title">Today's Summary</div>
                <div class="panel-sub mb-4">Overview</div>

                <div class="summary-row">
                    <span>Screen Time</span>
                    <strong>42 / 60 min</strong>
                </div>
                <MudProgressLinear Value="70" Color="Color.Primary" Rounded="true" />

                <div class="summary-list">
                    <div><span>Sessions Today</span><strong>3</strong></div>
                    <div><span>Lessons Done</span><strong>4</strong></div>
                    <div class="status-row">
                        <span>App Status</span>
                        <span class="status-pill">Active</span>
                    </div>
                </div>
            </MudPaper>
        </MudItem>
    </MudGrid>

</MudContainer>

@code {
    string[] days = { "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun" };

    List<ChartSeries> studySeries = new()
    {
        new ChartSeries
        {
            Name = "Study Time",
            Data = new double[] { 32, 41, 37, 45, 40, 25, 20 }
        }
    };

    List<ChartSeries> quizSeries = new()
    {
        new ChartSeries
        {
            Name = "Quiz",
            Data = new double[] { 78, 82, 85, 88, 90, 87, 92 }
        }
    };
}
